<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://pizssn.github.io</id>
    <title>pizssn</title>
    <updated>2020-05-26T12:38:54.955Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://pizssn.github.io"/>
    <link rel="self" href="https://pizssn.github.io/atom.xml"/>
    <subtitle>一名沉浮在代码世界的游荡者</subtitle>
    <logo>https://pizssn.github.io/images/avatar.png</logo>
    <icon>https://pizssn.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, pizssn</rights>
    <entry>
        <title type="html"><![CDATA[ServletContext对象]]></title>
        <id>https://pizssn.github.io/post/servletcontext-dui-xiang/</id>
        <link href="https://pizssn.github.io/post/servletcontext-dui-xiang/">
        </link>
        <updated>2019-10-10T06:19:22.000Z</updated>
        <content type="html"><![CDATA[<p>  web容器在启动的时候，它会为每个web程序都创建一个对应的ServletContext对象，他代表了当前的web应用。</p>
<p><strong>共享数据</strong><br>
  在这个servlet中的保存的数据，可以在另外一个servlet中拿到。</p>
<ul>
<li>通过ServletContext保存数据</li>
</ul>
<pre><code class="language-java">package pizssn.servlet;

import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class ContextServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {

//        this.getInitParameter()     初始化参数；
//        this.getServletConfig()     servlet参数；
//        this.getServletContext()    servlet上下文；
        ServletContext context = this.getServletContext();
        String username = &quot;pizssn&quot;;     /*数据*/
        context.setAttribute(&quot;username&quot;, username);      /*将一个数据保存在ServletContext中，名字为context*/
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
</code></pre>
<ul>
<li>从ServletContext获取数据</li>
</ul>
<pre><code class="language-java">package pizssn.servlet;

import javax.servlet.ServletContext;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import java.io.IOException;

public class GetServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        ServletContext context = this.getServletContext();
        String username = (String) context.getAttribute(&quot;username&quot;);
        resp.setContentType(&quot;text/html&quot;);
        resp.setCharacterEncoding(&quot;utf-8&quot;);
        resp.getWriter().print(&quot;名字：&quot; + username);
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
</code></pre>
<p><br></br><br>
<strong>获取初始化参数</strong><br>
  在xml文件配置一些web应用初始化参数</p>
<pre><code class="language-xml">&lt;context-param&gt;
        &lt;param-name&gt;url&lt;/param-name&gt;
        &lt;param-value&gt;jdbc:mysql://localhost:3306/mybaties&lt;/param-value&gt;
&lt;/context-param&gt;
</code></pre>
<p><br></br><br>
<strong>请求转发</strong><br>
  A想拿到的资源只能从C拿到，但是A只能接触到B，B就去C找相应资源，再转给A<br>
<img src="https://pizssn.github.io/post-images/1590495909565.png" alt="" loading="lazy"></p>
<ul>
<li>语法</li>
</ul>
<pre><code class="language-java">        ServletContext context = this.getServletContext();
//        RequestDispatcher requestDispatcher = context.getRequestDispatcher(&quot;/SD1&quot;);
//        requestDispatcher.forward(req,resp);
        context.getRequestDispatcher(&quot;/SD1&quot;).forward(req,resp);
</code></pre>
<p><br></br><br>
<strong>读取资源文件</strong><br>
  Properties(需要一个文件流)</p>
<ul>
<li>在java目录下新建Properties</li>
<li>在resources目录下新建Properties<br>
两者都会被打包到同一个路径下：class（classpath）</li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Servlet原理]]></title>
        <id>https://pizssn.github.io/post/servlet-yuan-li/</id>
        <link href="https://pizssn.github.io/post/servlet-yuan-li/">
        </link>
        <updated>2019-10-05T10:51:58.000Z</updated>
        <content type="html"><![CDATA[<p>servlet是由服务器调用，web服务器在收到浏览器请求后一系列流程如下图所示<br>
<img src="https://pizssn.github.io/post-images/1590491693609.png" alt="" loading="lazy"></p>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[Hello,Servlet——第一个servlet程序]]></title>
        <id>https://pizssn.github.io/post/helloservlet-di-yi-ge-servlet-cheng-xu/</id>
        <link href="https://pizssn.github.io/post/helloservlet-di-yi-ge-servlet-cheng-xu/">
        </link>
        <updated>2019-10-02T05:57:30.000Z</updated>
        <content type="html"><![CDATA[<p><strong>首先我们要先了解什么是servlet？</strong></p>
<blockquote>
<p>狭义的Servlet是指Java语言实现的一个接口，广义的Servlet是指任何实现了这个Servlet接口的类，一般情况下，人们将Servlet理解为后者。Servlet运行于支持Java的应用服务器中。从原理上讲，Servlet可以响应任何类型的请求，但绝大多数情况下Servlet只用来扩展基于HTTP协议的Web服务器。</p>
</blockquote>
<p>  简单点说就是，servlet是Sun公司开发动态web的一门技术，Sun公司在这些API中提供了一个接口叫做：servlet。</p>
<p><strong>那么，怎么开发一个servlet程序呢？</strong></p>
<p>只需要两个步骤：</p>
<ol>
<li>编写一个类，实现servlet接口。</li>
<li>把开发好的Java类部署到Web服务器中。</li>
</ol>
<p><strong>构建Servlet</strong><br>
servlet接口，Sun公司有两个默认的实现类：HTTPServlet，GenericServlet</p>
<ol>
<li>构建一个普通的Maven项目</li>
<li>Maven环境优化</li>
</ol>
<ul>
<li>修改web.xml，使其版本为当下最新</li>
</ul>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;web-app xmlns=&quot;http://xmlns.jcp.org/xml/ns/javaee&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://xmlns.jcp.org/xml/ns/javaee
                      http://xmlns.jcp.org/xml/ns/javaee/web-app_4_0.xsd&quot;
         version=&quot;4.0&quot;
         metadata-complete=&quot;true&quot;&gt;
&lt;/web-app&gt;
</code></pre>
<ul>
<li>将maven的结构搭建完整<br>
<img src="https://pizssn.github.io/post-images/1590482629390.png" alt="" loading="lazy"></li>
</ul>
<ol start="3">
<li>编写一个servlet程序</li>
</ol>
<ul>
<li>编写一个普通类</li>
</ul>
<pre><code class="language-java">  public class HelloServlet{

  }
</code></pre>
<ul>
<li>实现servlet接口，这里直接继承HTTPServlet</li>
</ul>
<pre><code class="language-java">import java.io.PrintWriter;

public class HelloServlet extends HttpServlet {
    @Override
    protected void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        System.out.println(&quot;进入doGet方法！&quot;);
        PrintWriter writer = resp.getWriter();  /*相应流*/
        writer.print(&quot;hello world!&quot;);

    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
        doGet(req, resp);
    }
}
</code></pre>
<ol start="4">
<li>编写servlet的映射，我们写的Java程序，但是要通过浏览器访问，而浏览器需要连接web服务器。所以我们要在web服务器中注册我们的servlet，再为其设置一个浏览器能够访问的路径。</li>
</ol>
<pre><code class="language-xml">    &lt;!--注册servlet--&gt;
    &lt;servlet&gt;
        &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
        &lt;servlet-class&gt;pizssn.servlet.HelloServlet&lt;/servlet-class&gt;
    &lt;/servlet&gt;
    &lt;!--servlet的请求路径--&gt;
    &lt;servlet-mapping&gt;
        &lt;servlet-name&gt;hello&lt;/servlet-name&gt;
        &lt;url-pattern&gt;/hello&lt;/url-pattern&gt;
    &lt;/servlet-mapping&gt;
</code></pre>
<ol start="5">
<li>配置Tomcat<br>
<img src="https://pizssn.github.io/post-images/1590483470448.png" alt="" loading="lazy"></li>
<li>启动测试<br>
<img src="https://pizssn.github.io/post-images/1590483674409.png" alt="" loading="lazy"></li>
</ol>
]]></content>
    </entry>
</feed>